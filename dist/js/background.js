!function(e){function t(t){for(var o,s,a=t[0],i=t[1],u=t[2],c=0,f=[];c<a.length;c++)s=a[c],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(e[o]=i[o]);for(d&&d(t);f.length;)f.shift()();return l.push.apply(l,u||[]),n()}function n(){for(var e,t=0;t<l.length;t++){for(var n=l[t],o=!0,a=1;a<n.length;a++){var i=n[a];0!==r[i]&&(o=!1)}o&&(l.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},r={1:0},l=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var a=window.webpackJsonp=window.webpackJsonp||[],i=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var d=i;l.push([9,0]),n()}([,,function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(10)),l=o(n(11)),s=(r.default,l.default);t.default={discord:r.default,mee6:s}},,,,,,,function(e,t,n){"use strict";var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=o(n(2)),l=new(o(n(12)).default);var s={},a=null,i=e=>{if(!e.url)return;const t=new URL(e.url);if(t.hostname!=r.default.discord.hostname)return;if(a==e.url)return;a=e.url;const n=t.pathname.split("/"),o=n[2];null!=o&&"@me"!=o?(console.log(`User switched to channel ${n[3]} and guild ${o}`),l.getGuildInfo(o,(e,t)=>t?null==e.player?console.log("User is not logged in on MEE6."):(s[o]={level:e.player.level,xp:e.player.xp},void console.log(s)):console.log("Server doesn't have MEE6 leveling enabled."))):console.log("User switched to DM channel.")};chrome.tabs.onCreated.addListener(e=>{i(e)}),chrome.tabs.onUpdated.addListener((e,t,n)=>{i(n)}),chrome.webRequest.onCompleted.addListener(e=>{if("POST"!=e.method)return;const t=new URL(e.url);if(t.hostname!=r.default.discord.hostname)return;if(!t.pathname.startsWith("/api/v9/channels"))return;const n=t.pathname.split("/");if(6!=n.length||"messages"!=n[5])return;const o=n[4];console.log("User sent message to channel id: "+o),chrome.tabs.get(e.tabId,e=>{if(!e.url)return;const t=new URL(e.url).pathname.split("/"),n=t[2];null!=n&&"@me"!=n&&s[n]&&l.getGuildInfo(n,(o,r)=>{if(!r)return console.log("Server doesn't have MEE6 leveling enabled.");if(null==o.player)return console.log("User is not logged in on MEE6.");if(o.player.level!=s[n].level)console.log("Earned 1 level from message."),chrome.tabs.sendMessage(e.id||0,{op:"level_earned",d:1}),chrome.tabs.sendMessage(e.id||0,{op:"start_timer",d:60,channel_id:t[3]});else if(o.player.xp!=s[n].xp){var l=o.player.xp-s[n].xp,a=o.player.detailed_xp[1],i=o.player.detailed_xp[0];console.log(`Earned ${l} xp from message.`),chrome.tabs.sendMessage(e.id||0,{op:"xp_earned",d:l,level_percentage:Math.floor(i/a*100)+"%",current_level:o.player.level}),chrome.tabs.sendMessage(e.id||0,{op:"start_timer",d:60,channel_id:t[3]})}else console.log("No xp earned from message.");s[n]=o.player})})},{urls:[r.default.discord.urlPattern]},[])},function(e){e.exports=JSON.parse('{"hostname":"discord.com","urlPattern":"https://discord.com/*"}')},function(e){e.exports=JSON.parse('{"host":"mee6.xyz"}')},function(e,t,n){"use strict";(function(e){var o,r=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(r,l){function s(e){try{i(o.next(e))}catch(e){l(e)}}function a(e){try{i(o.throw(e))}catch(e){l(e)}}function i(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}i((o=o.apply(e,t||[])).next())}))},l=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t};Object.defineProperty(t,"__esModule",{value:!0});const a=l(n(2)),i=s(n(14));var u="test"==(null===(o=null==e?void 0:e.env)||void 0===o?void 0:o.NODE_ENV);t.default=class{constructor(){this._host=a.default.mee6.host,this._token=null,u?this._fetch=i.default:(chrome.storage.local.get(["mee6_account_token"],e=>{e.mee6_account_token&&(this._token=e.mee6_account_token,console.log("MEE6 Account Token is "+this._token),this.defaultRequestHeaders.set("authorization",this._token||""))}),this._fetch=fetch.bind(window)),this.defaultRequestHeaders=new i.Headers,this.defaultRequestHeaders.set("User-Agent","Discord-Level-Helper-Chrome Extension/1.0"),this.defaultRequestHeaders.set("authorization",this._token||"")}getGuildInfo(e,t){return r(this,void 0,void 0,(function*(){const n=`https://${this._host}/api/plugins/levels/leaderboard/${e}`,o=yield this._fetch(n,{headers:this.defaultRequestHeaders,method:"GET"}),r=yield o.json();t(r,o.ok)}))}}}).call(this,n(13))}]);